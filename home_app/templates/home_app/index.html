{% extends "base.html" %}

{% block content %}

      <div class="row my-4">
          <div class="sidebar-panel col-12 col-md-4">

             {% if request.user.is_superuser %}
            <!-- Menu Sidebar -->
             <div id="admin-sidebar" class="sidebar-widget desktopdisplay">
              <div class="header">Admin Settings</div>
              <div class="menu-lists">
                <ul>
                  <li><a class="link-opacity-100"  href="/admin"><i class="fa-sharp fa-solid fa-user-tie icon-hover-color"></i> Admin Site</a></li>
                  <li><a class="link-opacity-100"  href="/comment_crud"><i class="fa-sharp fa-solid fa-user-gear icon-hover-color"></i> Comment Management</a></li>
                </ul>
              </div>
            </div>
            <!-- End Menu Sidebar -->
             {% endif %}

            <!-- Menu Sidebar -->
             <div id="menu-sidebar" class="sidebar-widget desktopdisplay">
              <div class="header">Menu</div>
              <div class="menu-lists">
                <ul>
                  <li><a class="link-opacity-100" href="/account" aria-label="Visit your account page (open in a same tab)"><i class="fa-solid fa-gear mx-2 icon-hover-color"></i>Profile</a></li>
                  <li><a class="link-opacity-100" href="/connection" aria-label="Visit your connection list (open in a same tab)"><i class="fa-solid fa-people-arrows mx-2 icon-hover-color"></i>Your Connection</a></li>
                  <li><a class="link-opacity-100" href="#" aria-label="Visit our chat room popover (open in a same tab)" ><i class="fa-solid fa-comments mx-2  icon-hover-color"></i>Chat</a></li>
                  <li><a class="link-opacity-100" href="/popular" aria-label="Visit our most popular place page (open in a same tab)"><i class="fa-brands fa-fort-awesome mx-2 icon-hover-color"></i>Most Popular Place</a></li>
                  <li><a class="link-opacity-100" href="https://www.audleytravel.com/thailand?infinity=ict2~net~gaw~cmp~16213647585~ag~136107107729~ar~679147414072~kw~thailand%20travel%20agency~mt~p~acr~2868936838&audcmp=16213647585&audadg=136107107729&audkey=thailand%20travel%20agency&auddev=c&audadid=679147414072&audpos=&audtrgt=kwd-627272734261&audtel=ppcnb&audnet=g&gad_source=1&gclid=Cj0KCQiAh8OtBhCQARIsAIkWb69knbPeiiIa-IqpTcnGycyXQnAh38qZY23ul8AsbUYOCiM2OarKkv8aAkGREALw_wcB" aria-label="Visit our travel agent page" target="_blank"><i class="fa-solid fa-cart-flatbed-suitcase mx-2 icon-hover-color"></i>Travel Agent</a></li>
                  <li><a class="link-opacity-100" href="https://uk.hotels.com/Hotel-Search?destination=Thailand&endDate=2024-02-08&gad_source=1&gclid=Cj0KCQiAh8OtBhCQARIsAIkWb6-lWCdV3ejPxpe0xPLA6OdpgvgvDfUYHFmpI1RxOVMRaghJEqKkTIYaAkIQEALw_wcB&locale=en_GB&regionId=178&semcid=HCOM-UK.UB.GOOGLE.DT-c-EN.HOTEL&semdtl=a112471567546.b1117822180639.g1kwd-15368040.e1c.m1Cj0KCQiAh8OtBhCQARIsAIkWb6-lWCdV3ejPxpe0xPLA6OdpgvgvDfUYHFmpI1RxOVMRaghJEqKkTIYaAkIQEALw_wcB.r1632a215bbafda89b93d9208569c01843edf04c0de81bc3284061577712f8d011.c1.j19046590.k1.d1618834618925.h1e.i1.l1.n1.o1.p1.q1.s1.t1.x1.f1.u1.v1.w1&siteid=300000005&sort=RECOMMENDED&startDate=2024-02-07&theme=&useRewards=false&userIntent=" aria-label="Visit our accommodations website" target="-blank"><i class="fa-solid fa-square-h mx-2 icon-hover-color"></i>Accommodations</a></li>
                  <li><a class="link-opacity-100" href="https://www.orientalescape.com/transfer/thailand/book" aria-label="Visit our transport website" target="_blank"><i class="fa-solid fa-taxi mx-2 icon-hover-color"></i>Transport</a></li>
                  <li><a class="link-opacity-100" href="https://www.independent.co.uk/topic/thailand-travel" aria-label="Visit our thai travel news" target="_blank"><i class="fa-solid fa-newspaper mx-2 icon-hover-color"></i>Thai Travel News </a></li>
                  <li><a class="link-opacity-100" href="/logout" aria-label="Visit your account page (open in a same tab)"><i class="fa-sharp fa-solid fa-right-from-bracket icon-hover-color mx-2 icon-hover-color"></i>Logout</a></li>
                </ul>
              </div>
            </div>
            <!-- End Menu Sidebar -->

            <!-- Card 1 -->
            <a href="https://theadventurepeople.com/destinations/thailand?gad_source=1&gclid=Cj0KCQiAh8OtBhCQARIsAIkWb69oxnEiFzIy4OvzXY9n6YMWJff1jJXbw8TcIr9OupEbmZU6FeksZW8aAqS0EALw_wcB"
              target="_blank"  aria-label="Visit fish and chip tour website (open in a new tab)" class="card text-decoration-none mb-3">
              <img alt="wat a run bangkok" src="https://media.istockphoto.com/id/1173736603/photo/young-woman-pulling-suitcase-in-airport-terminal-copy-space.jpg?s=1024x1024&w=is&k=20&c=Z90V6j_KuXIgd8KW_7eObiQMFZTfO4lDnulJ1QmrDSg=" class="card-img-top">
              <div class="card-body">
                <h5 class="card-title">Fish and Chip Tour</h5>
                <p class="card-text">Amazing Thailand Escorted Tour Packages from UK
                  Explore Bangkok, the Golden Triangle, Chiang Rai and Chai Mai on a Thailand tour package, which features a visit to an elephant camp.</p>
              </div>
            </a>
            <!-- End Card 1-->

            <!-- Card 2 -->
            <a href="https://www.thailand-tourism.net/"
              target="_blank"  aria-label="Visit thailand tourism.net website (open in a new tab)" class="card text-decoration-none mb-3">
              <img alt="wat a run bangkok" src="https://media.istockphoto.com/id/1146493663/photo/bangkok-thailand-at-the-temple-of-the-emerald-buddha-and-grand-palace.jpg?s=1024x1024&w=is&k=20&c=f2M_Pq_7ci7hp3sgSQfbhpZIrTfOSdlcocDXt2xvQXI=" class="card-img-top">
              <div class="card-body">
                <h5 class="card-title">Buddha Tour Dot Com</h5>
                <p class="card-text">5 DAYS CHIANG MAI BUDDHISM AND CULTURAL TOUR
                  VISIT CHIANG MAI FOR A TASTE OF BUDDHIST HISTORY AND CULTURE!
                  Let us design for you a trip that will give you insights into the development of Buddhism in North Thailand. We will discuss with you the itinerary and off we go!</p>
              </div>
            </a>
            <!-- End Card 2-->

            <!-- Card 3 -->
            <a href="https://www.thailand-tourism.net/"
              target="_blank"  aria-label="Visit lonelyplanet.com thailand website (open in a new tab)" class="card text-decoration-none mb-3">
              <img alt="phuket island" src="https://media.istockphoto.com/id/1309583872/photo/aerial-view-of-lao-lading-island-in-krabi-thailand.jpg?s=1024x1024&w=is&k=20&c=QluXaL4bsnRTTmpHZHvMRNJqGhFT-dBEy8xmJsXZWW8=" class="card-img-top">
              <div class="card-body">
                <h5 class="card-title">Best Phuket Tour</h5>
                <p class="card-text">
                  With turquoise waters, limestone cliffs, sandy beaches, and lush jungle, Phang Nga Bay boasts islands straight out of a brochure. Explore them with a guide on this all-inclusive day trip. Kayak through caves and mangroves at Koh Panak and surreal rock formations at Hong Island. Soak up views of James Bond Island then lounge on the beach at Lawa Island. Refuel with a buffet lunch onboard your boat.
                </div>
            </a>
            <!-- End Card 3-->

            <!-- Card 4 -->
            <a href="https://www.thaitravelcenter.com/thailand/"
              target="_blank"  aria-label="Visit thailand trevelcenter.com (open in a new tab)" class="card text-decoration-none mb-3">
              <img alt="two people sit on cragle on chang island" src="https://media.istockphoto.com/id/1213840216/photo/luxury-travel-romantic-couple-in-beach-hotel.jpg?s=1024x1024&w=is&k=20&c=Z-5_rrckhzQcXR_czDKemD3X5eQO2371QhDHzGI1Lew=" class="card-img-top">
              <div class="card-body">
                <h5 class="card-title">Koh Chang Island Tour</h5>
                <p class="card-text">
                  Koh Chang, ('Elephant Island' in Thai) is the third largest island in Thailand and part of the Mu Ko Chang National Park.
                  Compared to the bustling Phuket and Samui islands, Koh Chang offers a more peaceful and laid-back atmosphere, making it an ideal destination for travelers seeking to avoid the crowds. With a good range of accommodations, some excellent restaurants, and numerous bars, Koh Chang provides a perfect balance of relaxation and adventure.
                </p>
              </div>
            </a>
            <!-- End Card 4-->

            <!-- Card 5 -->
            <a href="https://forevervacation.com/bangkok-thrilling-tuk-tuk-tour?gad_source=1&gclid=CjwKCAjwupGyBhBBEiwA0UcqaNTRhiSnh982LDLAG3qtgnr0yhhked_02LeKEk6Aytv44dRxO9r_BRoCYWQQAvD_BwE"
              target="_blank"  aria-label="Visit thailand trevelcenter.com (open in a new tab)" class="card text-decoration-none mb-3">
              <img alt="two people sit on cragle on chang island" src="https://media.istockphoto.com/id/1131729452/photo/tuk-tuk-thailand-thai-traditional-taxi-in-thailand.jpg?s=1024x1024&w=is&k=20&c=yxFh0gomMISMzOVbChHm6c1i95RTSJETF5j1m14JK7s=" class="card-img-top">
              <div class="card-body">
                <h5 class="card-title">Tuk Tuk Tour Adventure</h5>
                <p class="card-text">
                  Established in 2010 Book a tour in Bangkok. Book online for the best tours at the best prices! Must-see attractions. Top-rated things to do. Top attraction tickets. Easy price comparison.</p>
                </div>
            </a>
            <!-- End Card 5-->

          </div>

          <div class="content-panel col-12 col-md-8">
              <!-- Form Post -->
              <div id="form-post" class="card">
                  <div class="form-post-header d-flex flex-row align-items-center mb-3 ">
                    <div class="text-center">
                      <img src="{{request.user.profile.get_profile_url}}" class="rounded" id="profile_img" alt="human shadow image" width='60' height='60'  onerror="this.src='/media/images/default/profile.png'"/>

                    </div>
                    <div>
                        <div class="">
                          <span  class="mx-3 fs-18">{{request.user.profile.get_full_name}}</span >
                        </div>
                    </div>
                  </div>
                  {{form.errors}}

                  <form method="post"  enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="input-group mb-3">
                      <!-- <input type="text" class="form-control" name="title" placeholder="Write something" aria-label="Write something" aria-describedby="button-addon2"> -->
                      <textarea class="form-control" name="title" placeholder="Write something" aria-label="Write something" aria-describedby="button-addon2"></textarea>
                    </div>
                    <div class="mb-3">
                      <input class="form-control" type="file" id="formFileMultiple" name="images" multiple>
                    </div>
                    <div>
                      <button class="btn w-100" type="submit" id="button-addon2">Post</button>
                    </div>
                  </form>
              </div>
              <!-- End Form Post -->

              <!-- Post Lists -->
              <div class="row">
                <div class="col-12">
                  {% for post in posts %}

                    <!-- Post -->
                    <div id="delete_post-{{post.id_post}}" class="post-card card">

                        <!-- Post Header -->
                        <div class="post-card-header">
                            <div class="d-flex flex-row align-items-center">
                              <div class="text-center">
                                <img src="{{post.user.profile.get_profile_url}}" class="rounded-5" alt="..." width=60 height=60 onerror="this.src='/media/images/default/profile.png'" />
                              </div>
                              <div class="">
                                <span  class="mx-3 fs-20 fw-700">{{post.user.profile.get_full_name}}</span >
                              </div>

                                <div class="dot-menu">
                                <i class="fa-solid fa-ellipsis-vertical icon-hover-color"></i>

                                    {% if user.is_authenticated %} {% if user.id == post.user.id %}

                                    <div class="dot-menu-frame">
                                  <div class="menu-item"><a href="javascript:void(0);" onclick="delete_post('{{post.id_post}}')" >Delete Post</a></div>
                                  <div class="menu-item"><a href="/?post_edit={{post.id_post}}"  >Edit Post</a></div>
                                </div>
                                    {% endif %} {% endif %}
                              </div>

                            </div>
                        </div>
                        <!-- End Post Header -->

                        <div class="post-card-info">
                          <div class="post-card-title">{{post.title}}</div>
                          <!-- <p class="post-card-excerpt">{{post.excerpt}}</p> -->
                        </div>

                        <!-- Post Image -->
                        {% if post.featured_image.url is not None %}
                          <img  class="card-img-top" alt="image from user" src="{{post.featured_image.url}}"  >home_app
                        {% else %}
                        <div id="carouselExampleControls-{{post.id_post}}" class="carousel slide" data-bs-ride="carousel">
                          <div class="carousel-inner">
                            {% for gallery in post.gallery_set.all %}
                              <div class="carousel-item active">
                                <img src="{{gallery.image.url}}" class="d-block w-100 rounded postimages" alt="..." height=500  />
                              </div>
                            {% endfor %}
                          </div>
                          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls-{{post.id_post}}" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                          </button>
                          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls-{{post.id_post}}" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                          </button>
                        </div>
                        {% endif %}
                        <!-- End Post Image -->

                        <div class="post-card-body card-body p-0">
                          <!-- Post Action -->
                          <div class="post-card-action">
                            <div class="post-card-action-item mobilemargin" id="like-{{post.id_post}}" onclick="toggle_like('{{post.id_post}}')">
                              <span class="action-text">
                                <span class="count-badge" id="likeCount-{{post.id_post}}" >{{post.likes.count}} </span>
                                  <i class="fa-solid fa-heart icon-hover-color tabwidth"></i> <span class="fontresposive" >LIKE</span>
                              </span>
                            </div>
                            <div class="post-card-action-item" id="comment-{{post.id_post}}" onclick="toggle_comment('post-comment-{{post.id_post}}')" >
                              <span class="action-text">
                                <span class="count-badge" id="commentcount-{{post.id_post}}" >{{post.comment_set.all.count}} </span>
                                  <i class="fa-regular fa-comment icon-hover-color tabwidth"></i> <span class="fontresposive" >COMMENT</span>
                              </span>
                            </div>

                            <div class="post-card-action-item " id="share-{{post.id_post}}" >

                                      <span  class="action-text ">
                                          <span class="count-badge" id="shareCount-{{post.id_post}}" >{{post.total_shares}}</span>
                                      <span  class="action-share" >

                                          <i class="fa-solid fa-share-from-square pointer icon-hover-color tabwidth"> </i> <span class="fontresposive" >SHARE</span>

                            <span class="action-share-frame">
                                  <span class="copy-link-item"><a onclick="copyURI(event,'{{post.id_post}}')" href="javascript:void(0);"><i class="fa-solid fa-link pointer"></i> Copy Link</a></span>

                                </span>
                                          </span>
                              </span>

                            </div>
                              <p id="copylink-{{post.id_post}}" class="d-none"  >{{full_url}}?post_id={{post.id_post}}</p>
                            <div class="post-card-action-item " id="connects-{{post.id_post}}" onclick="toggle_connect('{{post.user.id}}','{{post.id_post}}')" >
                              <span class="action-text">
                                <span class="count-badge" id="connectsCount-{{post.id_post}}" >{{post.friend_count}}</span>
                                  <i class="fa-solid fa-people-arrows pointer icon-hover-color tabwidth"></i> <span class="fontresposive" >CONNECT</span>
                              </span>
                            </div>
                          </div>
                          <!-- End Post Action -->

                          <input type="text" name="comment" class="form-control" onkeypress="post_comment(event,'{{post.id_post}}')" placeholder="what do you thing about this ... Press enter to add your comments">
                        </div>

                        <p  class="h6 my-3 d-none " id="post-commentp-{{post.id_post}}" >Comments</p>

                        <div class="card-footer d-none border-0" id="post-comment-{{post.id_post}}" >

                            {% for comment in post.get_all_comments %}
                                <div class="row" id="comment-{{comment.id_post_comment}}" >
                                  <div class="d-flex flex-row my-1">
                                      <div class="text-center ml-5">
                                          <img src="{{comment.user.profile.get_profile_url}}" class="rounded ml-5" alt="..." width="50" height="50" onerror="this.src='/media/images/default/profile.png'" >
                                        </div>
                                        <div>
                                          <div class="">
                                          <p  class="mx-3 my-0 text-post-account-comment text-bold">{{comment.user}}</p >
                                              <p  class="mx-3 my-2 text-post-comment"><span id="commenttxt-{{comment.id_post_comment}}" >{{comment.comment}}</span>
                                                  {% if user.is_authenticated %} {% if user.id == comment.user.id %}
                                                  <button class="deleteupdatebutton"  onclick="delete_comment('{{comment.id_post_comment}}','{{post.id_post}}')" >Delete?</button>
                                                  <button class="deleteupdatebutton" onclick="editshow('{{comment.id_post_comment}}')" >Edit?</button>

                                                  <input class="form-control editcommetfield form-control editboxhide d-none" type="text" id="{{comment.id_post_comment}}" name="comment" value="{{comment.comment}}" onkeypress="edit_comment(event,'{{comment.id_post_comment}}','{{post.id_post}}')" placeholder="press enter to Save Comment">
                                                  </p>
                                                  {% endif %} {% endif %}
                                      </div>
                                  </div>
                                      </div>
                              </div>

                                {% empty %}
                                <p  class="mx-3 my-2 text-center text-post-comment"></p >
                            {% endfor %}
                        </div>
                    </div>
                    <!-- End Post -->


                  {% endfor %}
                  </div>
              </div>
              <!-- End Post Lists -->





          </div>


      </div>


    </div>
  </section>


  <section id="advert " class="mobiledisplay">
    <div class="container">
      <div class="title">Advert</div>
      <div class="owl-carousel owl-theme ">
        <!-- Item 1 -->
        <div class="item">
           <a href="https://theadventurepeople.com/destinations/thailand?gad_source=1&gclid=Cj0KCQiAh8OtBhCQARIsAIkWb69oxnEiFzIy4OvzXY9n6YMWJff1jJXbw8TcIr9OupEbmZU6FeksZW8aAqS0EALw_wcB"
           target="_blank"  aria-label="Visit fish and chip tour website (open in a new tab)" class="advert-item card text-decoration-none mb-3">
           <img alt="wat a run bangkok" src="https://media.istockphoto.com/id/1173736603/photo/young-woman-pulling-suitcase-in-airport-terminal-copy-space.jpg?s=1024x1024&w=is&k=20&c=Z90V6j_KuXIgd8KW_7eObiQMFZTfO4lDnulJ1QmrDSg=" class="card-img-top">
           <div class="advert-item-body card-body">
             <h5 class="card-title">Fish and Chip Tour</h5>
             <p class="card-text">Amazing Thailand Escorted Tour Packages from UK
               Explore Bangkok, the Golden Triangle, Chiang Rai and Chai Mai on a Thailand tour package, which features a visit to an elephant camp.</p>
           </div>
         </a>
        </div>
        <!-- End Item 1-->
       <!-- Item 2 -->
        <div class="item">
          <a href="https://www.thailand-tourism.net/"
              target="_blank"  aria-label="Visit thailand tourism.net website (open in a new tab)" class="advert-item card text-decoration-none mb-3">
              <img alt="wat a run bangkok" src="https://media.istockphoto.com/id/1146493663/photo/bangkok-thailand-at-the-temple-of-the-emerald-buddha-and-grand-palace.jpg?s=1024x1024&w=is&k=20&c=f2M_Pq_7ci7hp3sgSQfbhpZIrTfOSdlcocDXt2xvQXI=" class="card-img-top">
              <div class="advert-item-body card-body">
                <h5 class="card-title">Buddha Tour Dot Com</h5>
                <p class="card-text">5 DAYS CHIANG MAI BUDDHISM AND CULTURAL TOUR
                  VISIT CHIANG MAI FOR A TASTE OF BUDDHIST HISTORY AND CULTURE!
                  Let us design for you a trip that will give you insights into the development of Buddhism in North Thailand. We will discuss with you the itinerary and off we go!</p>
              </div>
            </a>
       </div>
       <!-- End Item 2-->
        <!-- Item 3 -->
        <div class="item">
          <a href="https://www.thailand-tourism.net/"
              target="_blank"  aria-label="Visit lonelyplanet.com thailand website (open in a new tab)" class="advert-item card text-decoration-none mb-3">
              <img alt="phuket island" src="https://media.istockphoto.com/id/1309583872/photo/aerial-view-of-lao-lading-island-in-krabi-thailand.jpg?s=1024x1024&w=is&k=20&c=QluXaL4bsnRTTmpHZHvMRNJqGhFT-dBEy8xmJsXZWW8=" class="card-img-top">
              <div class="advert-item-body card-body">
                <h5 class="card-title">Best Phuket Tour</h5>
                <p class="card-text">
                  With turquoise waters, limestone cliffs, sandy beaches, and lush jungle, Phang Nga Bay boasts islands straight out of a brochure. Explore them with a guide on this all-inclusive day trip. Kayak through caves and mangroves at Koh Panak and surreal rock formations at Hong Island. Soak up views of James Bond Island then lounge on the beach at Lawa Island. Refuel with a buffet lunch onboard your boat.
                </div>
            </a>
       </div>
       <!-- End Item 3-->
        <!-- Item 4 -->
        <div class="item">
          <a href="https://www.thaitravelcenter.com/thailand/"
              target="_blank"  aria-label="Visit thailand trevelcenter.com (open in a new tab)" class="advert-item card text-decoration-none mb-3">
              <img alt="two people sit on cragle on chang island" src="https://media.istockphoto.com/id/1213840216/photo/luxury-travel-romantic-couple-in-beach-hotel.jpg?s=1024x1024&w=is&k=20&c=Z-5_rrckhzQcXR_czDKemD3X5eQO2371QhDHzGI1Lew=" class="card-img-top">
              <div class="advert-item-body card-body">
                <h5 class="card-title">Koh Chang Island Tour</h5>
                <p class="card-text">
                  Koh Chang, ('Elephant Island' in Thai) is the third largest island in Thailand and part of the Mu Ko Chang National Park.
                  Compared to the bustling Phuket and Samui islands, Koh Chang offers a more peaceful and laid-back atmosphere, making it an ideal destination for travelers seeking to avoid the crowds. With a good range of accommodations, some excellent restaurants, and numerous bars, Koh Chang provides a perfect balance of relaxation and adventure.
                </p>
              </div>
            </a>
       </div>
       <!-- End Item 4 -->
        <!-- Item 5 -->
        <div class="item">
          <a href="https://forevervacation.com/bangkok-thrilling-tuk-tuk-tour?gad_source=1&gclid=CjwKCAjwupGyBhBBEiwA0UcqaNTRhiSnh982LDLAG3qtgnr0yhhked_02LeKEk6Aytv44dRxO9r_BRoCYWQQAvD_BwE"
              target="_blank"  aria-label="Visit thailand trevelcenter.com (open in a new tab)" class="advert-item card text-decoration-none mb-3">
              <img alt="two people sit on cragle on chang island" src="https://media.istockphoto.com/id/1131729452/photo/tuk-tuk-thailand-thai-traditional-taxi-in-thailand.jpg?s=1024x1024&w=is&k=20&c=yxFh0gomMISMzOVbChHm6c1i95RTSJETF5j1m14JK7s=" class="card-img-top">
              <div class="advert-item-body card-body">
                <h5 class="card-title">Tuk Tuk Tour Adventure</h5>
                <p class="card-text">
                  Established in 2010 Book a tour in Bangkok. Book online for the best tours at the best prices! Must-see attractions. Top-rated things to do. Top attraction tickets. Easy price comparison.</p>
                </div>
            </a>
       </div>
       <!-- End Item 5 -->

      </div>




  <div id="confirmModal" class="modal">
      <div class="modal-content">
          <p>Are you sure you want to delete this post?</p>
          <div class="modal-buttons">
              <button id="confirmYes" class="modal-button">Yes, Proceed</button>
              <button id="confirmNo" class="modal-button cancel">No, Cancel</button>
          </div>
      </div>
  </div>
{% endblock content %}


{% block extras_js %}

<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
<script>

function copyURI(evt, post_id ) {
    evt.preventDefault();
    const linkElement = document.getElementById("copylink-"+post_id);
    const linkToCopy = linkElement.innerText;

    var csrftoken = Cookies.get('csrftoken');
        $.ajaxSetup({
            headers: {
                'X-CSRFToken': csrftoken
            }
         });


    $.ajax({
            type: 'POST',
            url: `/api/toggle-share/${post_id}/`,
            success: function(data) {

            $('#shareCount-' + post_id).html(data.share_count);

            navigator.clipboard.writeText(linkToCopy).then(() => {
            alert('Post link copied');
            }, () => {
            alert('Post link not Copied');
            });

            },
            error: function() {
                alert('Share failed!');
            }
        });
}

function toggle_connect(user_id,id_post) {
        const csrftoken = Cookies.get('csrftoken');
        $.ajaxSetup({
            headers: {
                'X-CSRFToken': csrftoken
            }
         });

        $.ajax({
            type: 'POST',
            url: `/api/toggle-connect/${user_id}/`,
            success: function(data) {

            if(data.connected){
            alert('Friend Request Sent!');
            }else{

            alert('Friend Request already Sent or you are already friends of each other or you can not send request to yourself or check you already received request from this user or not!');

            }


            },
            error: function() {
                alert('Connect fail');
            }
        });
    }

    function toggle_comment(id_post){
        $('#' + id_post).toggleClass('d-none');
      }

      function toggle_like(id_post) {
        const csrftoken = Cookies.get('csrftoken');


        $.ajaxSetup({
            headers: {
                'X-CSRFToken': csrftoken
            }
        });

        $.ajax({
            type: 'POST',
            url: `/api/toggle-like/${id_post}/`,
            success: function(data) {
                $('#likeCount-' + id_post).html(data.like_count);
            },
            error: function() {
                console.log('like fail')
            }
        });
    }

function editshow( comment_id ){

const x = document.getElementById(comment_id);
x.classList.toggle('d-none');
//if (x.classList.contains("d-none")) {
//    x.style.display = "block";
//  }else {
 //   x.style.display = "none";
 // }
}

function delete_post(post_id){

// Get the modal
        const modal = document.getElementById("confirmModal");
        modal.style.display = "block";
        // Get the button that opens the modal
        //const btn = document.getElementById("openModalBtn");

        // Get the buttons inside the modal
        const confirmYesBtn = document.getElementById("confirmYes");
        const confirmNoBtn = document.getElementById("confirmNo");

// When the user clicks on No, close the modal and cancel
        confirmNoBtn.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks on Yes, close the modal and proceed
        confirmYesBtn.onclick = function() {
            modal.style.display = "none";
            //alert("You pressed Yes!");

            $.ajax({
                type: 'POST',
                url: `/api/delete_post/${post_id}/`,
                data: {
                    'post_id':post_id,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    if (data.success) {
                        // Add HTML
                        const x = document.getElementById("delete_post-"+post_id);
                            x.style.display = "none";
                        alert('Post deleted successfully!');

                    }
                },
                error: function() {
                    alert('An error occurred.');
                }
            });
}
}

function delete_comment(comment_id , post_id){


            console.log("delete comment")

            $.ajax({
                type: 'POST',
                url: `/api/delete_comment/${comment_id}/`,
                data: {
                    'post_id':post_id,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    if (data.success) {
                        // Add HTML
                        const x = document.getElementById("comment-"+comment_id);
                            x.style.display = "none";

                        $('#commentcount-' + post_id).html(data.comment_count );
                    }
                },
                error: function() {
                    alert('An error occurred.');
                }
            });
        //}
}


function edit_comment(event,comment_id,post_id){

if (event.key === 'Enter') {
            console.log("post comment")
            event.preventDefault();
            const comment_text = $(event.target).val();

            $.ajax({
                type: 'POST',
                url: `/api/edit_comment/${comment_id}/`,
                data: {
                    'comment': comment_text,
                    'post_id':post_id,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    if (data.success) {
                        // Add HTML
                        const x = document.getElementById("commenttxt-"+comment_id);
                        const xbox = document.getElementById(comment_id);
                        x.innerText= comment_text;
                        xbox.value= comment_text;
                        xbox.style.display = "none";
                        const profileImgSrc = $('#profile_img').attr('src');
                    }
                },
                error: function() {
                    alert('An error occurred.');
                }
            });
        }


}

    function post_comment(event,post_id) {
        if (event.key === 'Enter') {
            console.log("post comment")
            event.preventDefault();
            const comment_text = $(event.target).val();

            $.ajax({
                type: 'POST',
                url: `/api/add_comment/${post_id}/`,
                data: {
                    'comment': comment_text,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (data) {
                    if (data.success) {
                        // Add HTML
                        const profileImgSrc = $('#profile_img').attr('src');
                        const commentHtml = `
                            <div class="row" id="comment-${data.comment.id_post_comment}" >
                                <div class="d-flex flex-row my-1">
                                    <div class="text-center ml-5">
                                        <img src="${profileImgSrc}" class="rounded ml-5" alt="..." width=50 height=50 onerror="this.src='/media/images/default/profile.png'" >
                                    </div>
                                    <div>
                                        <div class="">
                                            <p  class="mx-3 my-0 text-post-account-comment">${data.comment.user}</p>
                                            <p  class="mx-3 my-2 text-post-comment"><span id="commenttxt-${data.comment.id_post_comment}" >${data.comment.comment}</span>


                                                <button class="deleteupdatebutton"  onclick="delete_comment('${data.comment.id_post_comment}','${post_id}')" >Delete?</button>
                                                <button class="deleteupdatebutton"  onclick="editshow('${data.comment.id_post_comment}')" >Edit?</button>

                                                <input class="form-control editcommetfield form-control editboxhide d-none" type="text" id="${data.comment.id_post_comment}" name="comment" class="form-control editboxhide" value="${data.comment.comment}" onkeypress="edit_comment(event,'${data.comment.id_post_comment}','${post_id}')" placeholder="Press enter to save comment">
                                                </p>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        `;
                        // Add HTML
                        $('#post-comment-' + post_id).prepend(commentHtml);

                        // Delete text in textbox
                        $(event.target).val('');

                        $('#commentcount-' + post_id).html(data.comment_count );
                    }
                },
                error: function() {
                    alert('An error occurred.');
                }
            });
        }
    }
  </script>

  <script>
    $('.owl-carousel').owlCarousel({
      loop: true,
      nav: true,
      dots: true,
      navText: ["<i class='fa-solid fa-chevron-left'></i>", "<i class='fa-solid fa-chevron-right'></i>"],
      margin: 20,
      responsive:{
          0:{
              items:1
          },
          600:{
              items:2
          },
          1000:{
              items:3
          }
      }
  })
  </script>

  {% endblock extras_js %}
